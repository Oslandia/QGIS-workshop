
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Exercices &mdash; QGIS Workshop 1.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/linfiniti.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="QGIS Workshop 1.0.0 documentation" href="../../index.html" />
    <link rel="up" title="2e partie - Construire un plugin Python" href="index.html" />
    <link rel="next" title="3e partie - Évènementiel / déboguer / dépôt de plugins" href="../divers/index.html" />
    <link rel="prev" title="Tutoriel – Créer un plugin simple" href="plugins_tutorial.html" /> 
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="span3">
      <div class="well sidebar-nav">
          <a class="brand" href="http://qgis.org">
          <br />
          <center>QGIS Workshop</center></a>
            <h4>Contents</h4>
            <hr />
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Tutoriel</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="plugins_tutorial.html"
                        title="previous chapter">Tutoriel &#8211; Créer un plugin simple</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../divers/index.html"
                        title="next chapter">3e partie - Évènementiel / déboguer / dépôt de plugins</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/workshop/construire/plugins_exercises.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
            
            
            
          <a rel="license"
            href="http://creativecommons.org/licenses/by-sa/3.0/"><img
            alt="Creative Commons License" style="border-width:0"
            src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a><br
          /><span xmlns:dct="http://purl.org/dc/terms/"
            property="dct:title">Linfiniti Sphinx Theme</span> by <a
            xmlns:cc="http://creativecommons.org/ns#"
            href="http://linfiniti.com" property="cc:attributionName"
            rel="cc:attributionURL">Linfiniti Consulting CC.</a> is licensed
          under a <a rel="license"
            href="http://creativecommons.org/licenses/by-sa/3.0/">Creative
            Commons Attribution-ShareAlike 3.0 Unported License</a>.<br />Based
          on a work at <a xmlns:dct="http://purl.org/dc/terms/"
            href="https://github.com/timlinux/linfiniti-sphinx-theme"
            rel="dct:source">github.com</a>.
      </div>
        </div><!-- span9 -->
        <div class="span9">
              
  <div class="section" id="exercices">
<h1>Exercices<a class="headerlink" href="#exercices" title="Permalink to this headline">¶</a></h1>
<div class="section" id="but-lire-les-valeurs-de-raster-a-la-volee">
<h2>But : Lire les valeurs de raster à la volée<a class="headerlink" href="#but-lire-les-valeurs-de-raster-a-la-volee" title="Permalink to this headline">¶</a></h2>
<p>Dans cet exercice vous construisez un plugin du début à la fin en utilisant le Plugin Builder. Le but est de créer un plugin simple (même rudimentaire) pour afficher les valeurs d&#8217;un raster. L&#8217;objectif est pour vous de déterminer les étapes de programmation à partir de quelques indications. Cet exercice a un mode <strong>basique</strong> et un mode <strong>avancé</strong> .</p>
</div>
<div class="section" id="exercice-basique">
<h2>Exercice basique<a class="headerlink" href="#exercice-basique" title="Permalink to this headline">¶</a></h2>
<p>Si vous ne vous sentez pas à l&#8217;aise avec le Plugin Builder pour créer un outil à partir de zéro, vous pouvez alors modifier un plugin déjà fait et tenter de le faire ressembler à la solution.</p>
<ol class="arabic simple">
<li>Ouvrez QGIS et chargez la couche de relief ombré  <tt class="docutils literal"><span class="pre">/home/formation/natural_earth_50m/raster/shaded_relief/SR_50M/SR_50M.tif</span></tt></li>
<li>Cliquez sur l&#8217;outil plugin appelé <tt class="docutils literal"><span class="pre">foss4g2011_example2_solution</span></tt>ou <tt class="docutils literal"><span class="pre">E#2SOL</span></tt></li>
<li>Balayez la carte avec le curser de la souris et regardez les valeurs RGB changer dynamiquement. C&#8217;est le résultat final qu&#8217;il faut obtenir.</li>
<li>Naviguer dans  <tt class="docutils literal"><span class="pre">/home/formation/.qgis/python/plugins/foss4g2011_example2_starter/</span></tt></li>
<li>Ouvrir les fichiers  <tt class="docutils literal"><span class="pre">foss4g2011_example2_starter.py</span></tt> et <tt class="docutils literal"><span class="pre">foss4g2011_example2_starterdialog.py</span></tt> et trouvez les zones avec du code commenté. Vous allez devoir décommentez le code de ces deux fichiers pour faire fonctionner l&#8217;outil comme la solution proposée.</li>
</ol>
</div>
<div class="section" id="exercice-avance">
<h2>Exercice avancé<a class="headerlink" href="#exercice-avance" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-tool-requirements">
<h3>The Tool Requirements<a class="headerlink" href="#the-tool-requirements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Display every band value for a raster on mouse hover. That sounds confusing, but the idea is that your tool should work with a single grayscale raster or an RGBA raster without blowing up. There will be no mouse clicks, we&#8217;ll just be responding to the normal mouse cursor movement over the map canvas</li>
<li>Feedback of raster values will be output to a GUI (your choice on how to implement this on the GUI)</li>
</ul>
</div>
<div class="section" id="conseils">
<h3>Conseils<a class="headerlink" href="#conseils" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Vous allez devoir connecter une fonction spécifique au signal de canvas de carte  <a class="reference external" href="http://doc.qgis.org/head/classQgsMapCanvas.html#bf90fbd211ea419ded7c934fd289f0ab">xyCoordinates</a> </p>
</li>
<li><p class="first">Vous pouvez obtenir les valeurs pour chaque bande d&#8217;un raster comme ceci:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rLayer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">()</span><span class="o">.</span><span class="n">currentLayer</span><span class="p">()</span>
<span class="n">success</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">rLayer</span><span class="o">.</span><span class="n">identify</span><span class="p">(</span><span class="n">QgsPoint</span><span class="p">(</span><span class="o">-</span><span class="mi">122</span><span class="p">,</span> <span class="mi">47</span><span class="p">))</span>
<span class="k">for</span> <span class="n">band</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="solution">
<h3>Solution<a class="headerlink" href="#solution" title="Permalink to this headline">¶</a></h3>
<p>Si vous voulez tricher et regarder une des solutions possibles (mais une assez mauvaise) vous pouvez jeter un oeil à ces modules:</p>
<blockquote>
<div><ul class="simple">
<li>Le module Python principal <a class="reference external" href="../_static/rastervaluedisplay.py">est ici</a></li>
<li>Le module de dialogue principal  <a class="reference external" href="../_static/rastervaluedisplaydialog.py">est là</a></li>
<li>Le module compilé de l&#8217;ui <a class="reference external" href="../_static/ui_rastervaluedisplay.py">par là</a></li>
</ul>
</div></blockquote>
<p>Pour avoir une idée de la simplicité de l&#8217;outil, voici une image:</p>
<a class="reference internal image-reference" href="../../_images/raster_value_final.png"><img alt="../../_images/raster_value_final.png" class="align-center" src="../../_images/raster_value_final.png" style="width: 763.0px; height: 405.0px;" /></a>
</div>
</div>
</div>


        </div><!-- span9 -->
      </div><!-- row -->
    </div> <!-- container -->
    <div class="alert alert-info">
          &copy; Copyright 2011, Greg Corradini and Aaron Racicot.
    </div>
  </body>
</html>